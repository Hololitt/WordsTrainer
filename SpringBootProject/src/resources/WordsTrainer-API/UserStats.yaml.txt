paths:
  /api/stats/users:
    get:
      tags: [Stats]
      summary: Получить статистику пользователей
      description: Возвращает агрегированную статистику по всем пользователям
      responses:
        '200':
          description: Статистика пользователей
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UsersStatsResponse'
        '401':
          description: Пользователь не аутентифицирован
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'
        '403':
          description: Недостаточно прав
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorDTO'

components:
  schemas:
    UsersStatsResponse:
      type: object
      required: [usersStats, generatedAt]
      properties:
        usersStats:
          type: array
          items:
            $ref: '#/components/schemas/UserStats'
        generatedAt:
          type: string
          format: date-time
          example: "2025-12-21T14:30:00"

    UserStats:
      type: object
      required:
        - username
        - totalMistakesCount
        - countLanguageCards
        - languageCardsRepetitionCount
      properties:
        username:
          type: string
          example: john_doe
        totalMistakesCount:
          type: integer
          example: 15
        countLanguageCards:
          type: integer
          example: 50
        languageCardsRepetitionCount:
          type: integer
          example: 120

    ErrorDTO:
      type: object
      properties:
        message:
          type: string
          example: FORBIDDEN
